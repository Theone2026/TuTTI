(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function n(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(e){if(e.ep)return;e.ep=!0;const i=n(e);fetch(e.href,i)}})();const m=window.location.hostname==="localhost"?"http://localhost:3000":"https://tutti-production-6dfd.up.railway.app";document.getElementById("loginForm").addEventListener("submit",async o=>{o.preventDefault();const t=document.getElementById("email").value.trim(),n=document.getElementById("password").value;try{const c=await fetch(`${m}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}),e=await c.json();if(!c.ok)throw new Error(e.message||"Error al iniciar sesiÃ³n");localStorage.setItem("authToken",e.token),localStorage.setItem("user",JSON.stringify(e.user)),window.location.href="/dashboard.html"}catch(c){alert("Error: "+c.message),document.getElementById("password").value=""}});a;function r(o){const t=document.getElementById(o);t&&(t.classList.remove("hidden"),setTimeout(()=>{t.querySelector(":scope > div").classList.remove(`${o.includes("mini-cart")?"mini-cart-enter-from":"modal-enter-from"}`),t.querySelector(":scope > div").classList.add(`${o.includes("mini-cart")?"mini-cart-enter-active":"modal-enter-active"}`)},10))}function d(o){const t=document.getElementById(o);if(t){const n=t.querySelector(":scope > div");n.classList.remove(`${o.includes("mini-cart")?"mini-cart-enter-active":"modal-enter-active"}`),n.classList.add(`${o.includes("mini-cart")?"mini-cart-leave-to":"modal-leave-to"}`),setTimeout(()=>{t.classList.add("hidden"),n.classList.remove(`${o.includes("mini-cart")?"mini-cart-leave-to":"modal-leave-to"}`),n.classList.add(`${o.includes("mini-cart")?"mini-cart-enter-from":"modal-enter-from"}`)},o.includes("mini-cart")?300:200)}}window.openLoginModal=function(){closeMiniCartModal(),closeProductDetailModal(),r("login-modal")};window.closeLoginModal=function(){d("login-modal")};window.openMiniCartModal=function(){closeLoginModal(),closeProductDetailModal(),r("mini-cart-modal"),typeof window.updateMiniCartUI=="function"&&window.updateMiniCartUI()};window.closeMiniCartModal=function(){d("mini-cart-modal")};window.openProductDetailModal=function(o){closeLoginModal(),closeMiniCartModal(),r("product-detail-modal"),typeof window.displayProductDetails=="function"&&window.displayProductDetails(o)};window.closeProductDetailModal=function(){d("product-detail-modal")};document.addEventListener("DOMContentLoaded",()=>{document.addEventListener("click",e=>{["login-modal","mini-cart-modal","product-detail-modal"].forEach(s=>{const l=document.getElementById(s);l&&!l.classList.contains("hidden")&&!l.querySelector(":scope > div").contains(e.target)&&!e.target.closest('[onclick^="open"][id*="Modal"]')&&d(s)})});const o=document.getElementById("notificationIcon"),t=document.getElementById("notificationPanel");o&&t&&(o.addEventListener("click",e=>{e.stopPropagation(),t.classList.contains("hidden")?(t.classList.remove("hidden","scale-95","opacity-0"),t.classList.add("scale-100","opacity-100")):(t.classList.remove("scale-100","opacity-100"),t.classList.add("scale-95","opacity-0"),setTimeout(()=>{t.classList.add("hidden")},200))}),document.addEventListener("click",e=>{!t.contains(e.target)&&!o.contains(e.target)&&(t.classList.contains("hidden")||(t.classList.remove("scale-100","opacity-100"),t.classList.add("scale-95","opacity-0"),setTimeout(()=>{t.classList.add("hidden")},200)))}));const n=document.getElementById("account-dropdown-toggle"),c=document.getElementById("account-dropdown-menu");n&&c&&(n.addEventListener("click",e=>{e.stopPropagation(),c.classList.toggle("hidden")}),document.addEventListener("click",e=>{!c.contains(e.target)&&!n.contains(e.target)&&c.classList.add("hidden")}))});
