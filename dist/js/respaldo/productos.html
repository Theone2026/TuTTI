<!-- ... (código HTML existente) -->

<script>
document.addEventListener('DOMContentLoaded', async function () {
    const token = localStorage.getItem('authToken');
    const userId = localStorage.getItem('userId'); // Asegúrate de guardar el userId al iniciar sesión

    try {
        const response = await fetch('http://localhost:3000/api/products', {
            headers: {
                'Authorization': `Bearer ${token}`
            }
        });
        const products = await response.json();

        const productContainer = document.getElementById('product-container');
        productContainer.innerHTML = '';

        products.forEach(product => {
            const productElement = document.createElement('div');
            productElement.className = 'bg-white rounded-lg shadow-md p-4';
            productElement.innerHTML = `
                <img src="${product.images[0]}" alt="${product.name}" class="w-full h-48 object-cover mb-4">
                <h2 class="text-xl font-bold mb-2">${product.name}</h2>
                <p class="text-gray-600 mb-2">${product.description}</p>
                <p class="text-lg font-bold mb-4">${product.currency} ${product.price}</p>
                ${product.userId !== userId ? 
                    `<button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Comprar ahora</button>` : 
                    `<p class="text-gray-500">Este es tu producto</p>`}
            `;
            productContainer.appendChild(productElement);
        });
    } catch (error) {
        console.error('Error al cargar los productos:', error);
    }
});
</script>