<!DOCTYPE html>
<html lang="es">
</head>
<body>
    <!-- ...existing code... -->
    <script>
        document.addEventListener("DOMContentLoaded", async () => {
            try {
                const token = localStorage.getItem("token"); // Suponiendo que el token se almacena en localStorage

                if (!token) {
                    throw new Error("No se encontró el token. Por favor, inicia sesión.");
                }

                const response = await fetch("http://localhost:3000/api/user", {
                    method: "GET",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": `Bearer ${token}`
                    }
                });

                if (!response.ok) {
                    throw new Error(`Error ${response.status}: ${response.statusText}`);
                }

                const userData = await response.json();
                console.log("Datos del usuario:", userData);
                // ...existing code para manejar los datos del usuario...
            } catch (error) {
                console.error("Error:", error);
                // ...existing code para manejar errores...
            }
        });
    </script>
    <!-- ...existing code... -->
</body>
</html>